{% extends "meetLink/base.html" %}

{% block contenido %}

<!-- Botón desplegar menú (pantallas pequeñas) -->
<button class="btn btn-outline-light d-md-none m-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbar" aria-controls="navbar">
    ☰
</button>

<!-- Navbar -->
<div id="navbar" class="offcanvas-md offcanvas-start sidebar" tabindex="-1" aria-labelledby="sidebarLabel">
    <div class="offcanvas-header d-md-none">
        <h5 class="offcanvas-title text-light" id="sidebarLabel">Menú</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>

    <div id="contenido-navbar" class="offcanvas-body d-flex flex-column">
        <div class="user-info text-center mb-4">
            <img src="{{ user.profile.image.url|default:'/media/logo2.png' }}" alt="Foto de perfil">
            <h5 class="mt-2">{{ user.username }}</h5>
        </div>
        <ul class="nav flex-column mb-4">
            <li class="nav-item">
                <a class="nav-link active" href="#">INICIO</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">CONTACTOS</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">EVENTOS</a>
            </li>
        </ul>
        <form action="{% url 'logout' %}" method="post" class="mt-auto text-center">
            {% csrf_token %}
            <button type="submit" class="btn logout-btn mt-4">Log Out</button>
        </form>
        <div class="navbar-footer">
            meetLink - 2025
        </div>        
    </div>
</div>

<!-- MAIN CONTENT -->
<main class="content-wrapper">
    <div id="content" class="row">
        <!-- Parte central -->
        <div id="columna-contenido" class="col-md-6 mb-4">
            <div id="card-crearEvento" class="card text p-3">
                <h4><strong>¿Algo nuevo?</strong></h4>
                <p>Planifica una nueva actividad o viaje y compártelo con tus contactos.</p>
                <a id="btn-crearEvento" class="btn btn-outline border-dark">CREAR</a>
            </div>
        </div>

        <!-- Columna eventos -->
        <div id="columna-eventos" class="col-md-6 d-flex flex-column align-items-end">
            <div class="scroll-events w-100">
                {% for evento in eventos %}
                    <div class="card event-card mb-3 p-3">
                        <h5>{{ evento.nombre }}</h5>
                        <small>{{ evento.fecha|date:"d/m/Y" }}</small>
                        <p>{{ evento.descripcion|truncatewords:15 }}</p>
                        <a href="{% url 'detalle_evento' evento.id %}" class="btn btn-sm btn-outline-light">Ver más</a>
                    </div>
                {% empty %}
                    <p class="text-light">Todavía no hay eventos disponibles.</p>
                {% endfor %}
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
